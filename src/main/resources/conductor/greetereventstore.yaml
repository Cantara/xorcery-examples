data:
    - id: greeter_domainevents_eventstore
      type: grouptemplate
      attributes:
        name: Greeter events into EventStore
        sources:
          pattern: type=='domainevents'
          configuration:
            rel: eventsubscriber
        consumers:
          pattern: rel=='eventsubscriber'
          configuration:
            stream: "{{ environment }}-{{ tag }}-greeter"

    - id: greeter_eventstore_neo4jprojection
      type: grouptemplate
      attributes:
        name: Greeter events from EventStore into Neo4j
        sources:
          pattern: rel=='eventpublisher'
          configuration:
            stream: "{{ environment }}-{{ tag }}-greeter"
        consumers:
          pattern: type=='neo4jprojections'
          configuration:
            id: greeter
            database: neo4j
            rel: eventpublisher

    - id: greeter_eventstore_opensearch
      type: grouptemplate
      attributes:
        name: Greeter events from EventStore into OpenSearch
        sources:
          pattern: rel=='eventpublisher'
          configuration:
            stream: "{{ environment }}-{{ tag }}-greeter"
        consumers:
          pattern: type=='opensearch'
          configuration:
            rel: eventpublisher
            index: "domainevents-{{ environment }}-{{ tag }}-greeter-%tF"
            alias: "domainevents"
